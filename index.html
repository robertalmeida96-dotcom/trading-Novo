<!--
*****************
ADICIONAR AO INDEX.HTML
Snippets de c√≥digo para integra√ß√£o Firebase
Copie e cole nas posi√ß√µes indicadas
*****************
-->

<!-- ============================================ -->
<!-- SNIPPET 1: Adicionar ANTES do </head> -->
<!-- ============================================ -->

<!-- Firebase: Status de Conex√£o -->
<style>
    #connection-status {
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 12px;
        font-weight: 600;
        z-index: 10000;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
    }
    
    .status-online {
        background: linear-gradient(135deg, #00FF88 0%, #00CC70 100%);
        color: #0A0A0F;
        box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        animation: pulse-online 2s infinite;
    }
    
    .status-offline {
        background: linear-gradient(135deg, #FF0055 0%, #CC0044 100%);
        color: #FFFFFF;
        box-shadow: 0 4px 15px rgba(255, 0, 85, 0.3);
        animation: pulse-offline 1s infinite;
    }
    
    @keyframes pulse-online {
        0%, 100% {
            box-shadow: 0 4px 15px rgba(0, 255, 136, 0.3);
        }
        50% {
            box-shadow: 0 4px 25px rgba(0, 255, 136, 0.5);
        }
    }
    
    @keyframes pulse-offline {
        0%, 100% {
            box-shadow: 0 4px 15px rgba(255, 0, 85, 0.3);
        }
        50% {
            box-shadow: 0 4px 25px rgba(255, 0, 85, 0.6);
        }
    }
    
    #connection-status i {
        animation: rotate 2s linear infinite;
    }
    
    .status-online i {
        animation: none;
    }
    
    @keyframes rotate {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }
</style>


<!-- ============================================ -->
<!-- SNIPPET 2: Adicionar LOGO AP√ìS o <body> -->
<!-- ============================================ -->

<!-- Firebase: Indicador de Status de Conex√£o -->
<div id="connection-status" class="status-online">
    <i class="fas fa-check-circle"></i>
    <span>Online</span>
</div>


<!-- ============================================ -->
<!-- SNIPPET 3: Adicionar ANTES do </body> -->
<!-- ============================================ -->

<!-- Firebase: SDK e Sincroniza√ß√£o -->
<script type="module">
    import { initFirebase, saveToFirebase, syncData } from './firebase-config.js';
    
    // Vari√°vel global para controlar se o Firebase est√° pronto
    window.firebaseReady = false;
    
    // Inicializar Firebase quando a p√°gina carregar
    window.addEventListener('DOMContentLoaded', async () => {
        try {
            console.log('üî• Inicializando Firebase...');
            await initFirebase();
            window.firebaseReady = true;
            console.log('‚úÖ Firebase pronto!');
            
            // Mostrar mensagem de boas-vindas
            setTimeout(() => {
                const status = document.getElementById('connection-status');
                if (status && status.classList.contains('status-online')) {
                    const originalHTML = status.innerHTML;
                    status.innerHTML = '<i class="fas fa-cloud-upload-alt"></i> <span>Sincronizado!</span>';
                    
                    setTimeout(() => {
                        status.innerHTML = originalHTML;
                    }, 2000);
                }
            }, 1000);
            
        } catch (error) {
            console.error('‚ùå Erro ao inicializar Firebase:', error);
            window.firebaseReady = false;
        }
    });
    
    // Interceptar salvamento no localStorage para sincronizar automaticamente
    const originalSetItem = localStorage.setItem;
    localStorage.setItem = function(key, value) {
        // Chamar o m√©todo original
        originalSetItem.apply(this, arguments);
        
        // Se for o Trading Pro Data e o Firebase estiver pronto, sincronizar
        if (key === 'tradingProData' && window.firebaseReady) {
            console.log('üíæ Dados salvos localmente, sincronizando com nuvem...');
            
            // Sincronizar ap√≥s um pequeno delay para agrupar m√∫ltiplas altera√ß√µes
            if (window.syncTimeout) {
                clearTimeout(window.syncTimeout);
            }
            
            window.syncTimeout = setTimeout(async () => {
                try {
                    await syncData();
                    console.log('‚òÅÔ∏è Sincroniza√ß√£o conclu√≠da');
                    
                    // Feedback visual
                    const status = document.getElementById('connection-status');
                    if (status && status.classList.contains('status-online')) {
                        const originalHTML = status.innerHTML;
                        status.innerHTML = '<i class="fas fa-check-circle"></i> <span>Salvo!</span>';
                        
                        setTimeout(() => {
                            status.innerHTML = originalHTML;
                        }, 1500);
                    }
                } catch (error) {
                    console.error('‚ùå Erro na sincroniza√ß√£o:', error);
                }
            }, 1000);
        }
    };
    
    // Evento para quando a janela for fechada (√∫ltimo sync)
    window.addEventListener('beforeunload', () => {
        if (window.firebaseReady) {
            syncData();
        }
    });
    
    // Sincroniza√ß√£o peri√≥dica (a cada 5 minutos)
    setInterval(() => {
        if (window.firebaseReady && navigator.onLine) {
            console.log('üîÑ Sincroniza√ß√£o peri√≥dica...');
            syncData();
        }
    }, 5 * 60 * 1000); // 5 minutos
</script>


<!-- ============================================ -->
<!-- RESUMO DE INTEGRA√á√ÉO -->
<!-- ============================================ -->

<!--
‚úÖ CHECKLIST DE INTEGRA√á√ÉO:

1. [ ] Adicionar SNIPPET 1 antes do </head>
2. [ ] Adicionar SNIPPET 2 logo ap√≥s <body>
3. [ ] Adicionar SNIPPET 3 antes do </body>
4. [ ] Criar arquivo firebase-config.js na mesma pasta
5. [ ] Configurar credenciais no firebase-config.js
6. [ ] Mover ambos os arquivos para pasta public/
7. [ ] Executar: firebase deploy

RESULTADO ESPERADO:
- Indicador "Online" no canto superior direito
- Sincroniza√ß√£o autom√°tica a cada salvamento
- Feedback visual "Salvo!" ap√≥s cada opera√ß√£o
- Sincroniza√ß√£o entre dispositivos em tempo real

TESTE:
1. Abra o site no PC
2. Fa√ßa uma opera√ß√£o (criar dia, adicionar entrada, etc)
3. Veja o indicador mudar para "Salvo!"
4. Abra o mesmo site no celular
5. Os dados devem aparecer automaticamente

Se tiver problemas, abra o Console (F12) e veja os logs em vermelho.
-->
